{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from 'vuex';\nexport default {\n  name: \"HouseholdMain\",\n  data() {\n    return {\n      pageNum: 1,\n      pageSize: 10,\n      show3: false,\n      text: '下拉查询'\n    };\n  },\n  computed: {\n    ...mapState(['residentList'])\n  },\n  methods: {\n    handleSizeChange(val) {\n      console.log(`每页 ${val} 条`);\n      this.pageNum = 1;\n      this.pageSize = val;\n      this.loadPost();\n    },\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`);\n      this.pageNum = val;\n      this.loadPost();\n    },\n    loadPost() {\n      this.$axios.get('http://localhost:8090/resident/list').then(res => {\n        if (res.status === 200) {\n          console.log(\"请求成功！\");\n          console.log(\"返回的数据：\", res.data);\n          this.$store.dispatch('asyncUpdateResidentList', res.data);\n          this.$store.dispatch('asyncUpdateResidentNum', res.data.length);\n        } else if (res.status === 400) {\n          console.log(\"请求失败！\");\n        }\n      }).catch(error => {\n        console.log(\"请求错误：\", error);\n      });\n    },\n    doFan() {\n      this.show3 = !this.show3;\n      if (!this.show3) {\n        this.icon = 'el-icon-caret-bottom';\n        this.placement = 'bottom';\n        this.content = '下拉查询';\n      } else {\n        this.icon = 'el-icon-caret-top';\n        this.placement = 'top';\n        this.content = '上拉隐藏';\n      }\n    }\n  },\n  beforeMount() {\n    this.loadPost();\n    this.doFan();\n  }\n};","map":{"version":3,"names":["mapState","name","data","pageNum","pageSize","show3","text","computed","methods","handleSizeChange","val","console","log","loadPost","handleCurrentChange","$axios","get","then","res","status","$store","dispatch","length","catch","error","doFan","icon","placement","content","beforeMount"],"sources":["src/components/HouseholdManage/HouseholdMain.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <div style=\"margin-bottom: 5px; margin-top: 5px; margin-left: 5px\"  v-show=\"show3\">\r\n        <el-input v-model=\"name\" placeholder=\"请输入名字\" suffix-icon=\"el-icon-search\" style=\"width: 200px\"\r\n                  @keyup.enter.native=\"loadPost\"></el-input>\r\n        <el-input v-model=\"unitNumber\" placeholder=\"输入单元\" suffix-icon=\"el-icon-search\" style=\"width: 100px\"\r\n                  @keyup.enter.native=\"loadPost\"></el-input>\r\n        <el-input v-model=\"roomNumber\" placeholder=\"输入房间\" suffix-icon=\"el-icon-search\" style=\"width: 100px\"\r\n                  @keyup.enter.native=\"loadPost\"></el-input>\r\n        <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"loadPost\">查询</el-button>\r\n        <el-button type=\"success\" @click=\"resetParam\">重置</el-button>\r\n\r\n        <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"add\">新增</el-button>\r\n      </div>\r\n\r\n      <div>\r\n        <el-tooltip class=\"item\" effect=\"dark\" :content=\"content\" :placement=\"placement\">\r\n          <i :class=\"icon\" @click=\"doFan\" style=\"margin-left: 10px; size: 100px; font-size: 30px\"></i>\r\n        </el-tooltip>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <el-table :data=\"residentList\" style=\"height: 100%\">\r\n      <el-table-column prop=\"id\" label=\"序号\" width=\"200\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"communityId\" label=\"小区号\" width=\"100\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"name\" label=\"姓名\" width=\"80\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"moveInDate\" label=\"入住时间\" width=\"150\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"moveOutDate\" label=\"搬离时间\" width=\"150\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"contact\" label=\"手机号\" width=\"200\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"roomNumber\" label=\"房间号\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"unitNumber\" label=\"单元号\">\r\n      </el-table-column>\r\n    </el-table>\r\n    \r\n    <div class=\"block\">\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"1\"\r\n        :page-sizes=\"[5, 10, 20, 30]\"\r\n        :page-size=\"10\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=this.$store.getters.getResidentNum>\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n \r\n  \r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  name: \"HouseholdMain\",\r\n  data() {\r\n    return {\r\n      pageNum:1,\r\n      pageSize:10,\r\n      show3:false,\r\n      text:'下拉查询',\r\n    }\r\n  },\r\n  computed:{\r\n    ...mapState(['residentList'])\r\n  },\r\n  methods:{\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n      this.pageNum=1;\r\n      this.pageSize=val;\r\n      this.loadPost();\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.pageNum=val;\r\n      this.loadPost();\r\n    },\r\n    loadPost(){\r\n      this.$axios.get('http://localhost:8090/resident/list')\r\n          .then((res) =>{\r\n            if (res.status === 200) {\r\n              console.log(\"请求成功！\");\r\n              console.log(\"返回的数据：\", res.data);\r\n              this.$store.dispatch('asyncUpdateResidentList',res.data)\r\n              this.$store.dispatch('asyncUpdateResidentNum',res.data.length)\r\n            } else if (res.status === 400) {\r\n              console.log(\"请求失败！\");\r\n            }\r\n          })\r\n          .catch((error) =>{\r\n            console.log(\"请求错误：\", error);\r\n          });\r\n    },\r\n    doFan(){\r\n      this.show3 = !this.show3\r\n      if(!this.show3){\r\n        this.icon='el-icon-caret-bottom'\r\n        this.placement='bottom'\r\n        this.content='下拉查询'\r\n      }else{\r\n        this.icon='el-icon-caret-top'\r\n        this.placement='top'\r\n        this.content='上拉隐藏'\r\n      }\r\n    },\r\n  },\r\n  beforeMount() {\r\n    this.loadPost();\r\n    this.doFan();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n .block {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-top: 50px;\r\n }\r\n\r\n</style>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA,SAAAA,QAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;MACAC,IAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAP,QAAA;EACA;EACAQ,OAAA;IACAC,iBAAAC,GAAA;MACAC,OAAA,CAAAC,GAAA,OAAAF,GAAA;MACA,KAAAP,OAAA;MACA,KAAAC,QAAA,GAAAM,GAAA;MACA,KAAAG,QAAA;IACA;IACAC,oBAAAJ,GAAA;MACAC,OAAA,CAAAC,GAAA,SAAAF,GAAA;MACA,KAAAP,OAAA,GAAAO,GAAA;MACA,KAAAG,QAAA;IACA;IACAA,SAAA;MACA,KAAAE,MAAA,CAAAC,GAAA,wCACAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACAR,OAAA,CAAAC,GAAA;UACAD,OAAA,CAAAC,GAAA,WAAAM,GAAA,CAAAhB,IAAA;UACA,KAAAkB,MAAA,CAAAC,QAAA,4BAAAH,GAAA,CAAAhB,IAAA;UACA,KAAAkB,MAAA,CAAAC,QAAA,2BAAAH,GAAA,CAAAhB,IAAA,CAAAoB,MAAA;QACA,WAAAJ,GAAA,CAAAC,MAAA;UACAR,OAAA,CAAAC,GAAA;QACA;MACA,GACAW,KAAA,CAAAC,KAAA;QACAb,OAAA,CAAAC,GAAA,UAAAY,KAAA;MACA;IACA;IACAC,MAAA;MACA,KAAApB,KAAA,SAAAA,KAAA;MACA,UAAAA,KAAA;QACA,KAAAqB,IAAA;QACA,KAAAC,SAAA;QACA,KAAAC,OAAA;MACA;QACA,KAAAF,IAAA;QACA,KAAAC,SAAA;QACA,KAAAC,OAAA;MACA;IACA;EACA;EACAC,YAAA;IACA,KAAAhB,QAAA;IACA,KAAAY,KAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}